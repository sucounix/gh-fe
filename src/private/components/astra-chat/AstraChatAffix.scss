@import "../../../GlobalStyle.scss";

.astra-button {
  fill: #771dfc;
  stroke-width: 0.5px;
  stroke: #8f43ff;
  filter: drop-shadow(0px 11px 10px rgba(0, 0, 0, 0.09));
  cursor: pointer;
}

.astra-affix {
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 200;
  @include for-tablet-only {
    zoom: 0.5;
  }
  @include for-phone-only {
    zoom: 0.4;
  }
  .astra__chat {
    height: 100%;
    padding: 0;
    display: flex;
    flex-direction: column;
    border-radius: 20px;
    overflow: hidden;

    &:after {
      content: "";
      position: absolute;
      top: 100%;
      right: 30px;
      margin-left: -5px;
      border-width: 10px;
      border-style: solid;
      border-color: $astra transparent transparent transparent;
    }

    .astra__chat__header {
      background-color: $astra;
      color: white;
      border-radius: 20px 20px 0 0;
    }
    .astra__chat__header_Conversation {
      @extend .astra__chat__header;
      padding: 1.5rem 0.83rem 2rem 0.83rem;
    }
    .astra__chat__header_history {
      @extend .astra__chat__header;
      padding: 1.5rem 0.83rem 1.44rem 0.83rem;
    }
    .astra__chat__message__view {
      overflow: hidden;
      position: relative;
      margin: -1.2rem 0;
      border-radius: 1rem 1rem 0rem 0rem;
      background-color: white;
      display: flex;
      flex-direction: column;
      flex: 1;

      .astra__chat__messages {
        padding: 0.8rem;
        overflow-y: auto;
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.4rem;
        @extend .Caption;

        &::-webkit-scrollbar-thumb {
          background-color: $astra !important;
          border-radius: 22px;
        }

        .astra__chat__message__body {
          max-width: 80%;

          &.astra__chat__message__user {
            align-self: end;
            width: fit-content;
            display: flex;
            flex-direction: column;

            .message__content {
              display: flex;
              align-items: center;
              gap: 0.5rem;

              .astra__chat__message {
                background: #771dfc;
                border-radius: 0.9375rem 0.9375rem 0.125rem 0.9375rem;
                color: white;
                padding: 0.5rem 0.875rem;

                * {
                  overflow: auto;
                  white-space: pre-line;
                }
              }

              .error-icon {
                color: #fc1d53;
                font-size: 1.2rem;
              }
            }

            .message__footer {
              align-self: flex-end;
              color: #fc1d53;
              margin-top: 0.25rem;

              .retry__button {
                text-decoration: underline;
              }
            }
          }

          &.astra__chat__message__astra {
            align-self: start;
            width: fit-content;

            .astra__chat__message {
              padding: 0.5rem 0.875rem;
              border-radius: 6.25rem;
              color: #1e1e1e;
              border-radius: 0.9375rem 0.9375rem 0.9375rem 0.125rem;
              background: #f4f4f4;

              * {
                overflow: auto;
                white-space: pre-line;
              }
            }
          }

          &.astra__chat__message__failed {
            .message__content {
              .astra__chat__message {
                background-color: #fc1d53;
              }
            }
          }

          .astra__chat__message {
            display: flex;
          }
        }
      }

      .astra__assistant__loader {
        padding: 0.5rem 0.875rem;
        border-radius: 6.25rem;
        color: #1e1e1e;
        border-radius: 0.9375rem 0.9375rem 0.9375rem 0.125rem;
        background: #f4f4f4;
      }
      .astra_chat_loader {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-end;
        padding: 1rem;
        width: 100%;
        gap: 0.4rem;
        overflow: hidden;

        .astra__chat__message__astra {
          align-self: flex-start;
          margin-bottom: 0.8rem;
          width: 80%;
          height: 6rem;
          padding: 0.5rem 0.875rem;
          border-radius: 6.25rem;
          color: #1e1e1e;
          border-radius: 0.9375rem 0.9375rem 0.9375rem 0.125rem;
        }

        .astra__chat__message__user {
          align-self: flex-end;
          margin-bottom: 0.8rem;
          width: 40%;
          height: 2.25rem;
          padding: 0.5rem 0.875rem;
          border-radius: 6.25rem;
          color: #1e1e1e;
          border-radius: 0.9375rem 0.9375rem 0.125rem 0.9375rem;

          &::after {
            background-color: $astra;
          }
        }
      }
      .astra__chat__predfined__questions {
        position: sticky;
        bottom: 0;
        padding: 0.8rem;
        display: flex;
        flex-wrap: wrap;
        gap: 0.4rem;

        .question {
          @extend .Caption;
          border-radius: 3.125rem;
          border: 0.5px solid #771dfc;
          padding: 0.5rem 0.88rem;
          display: flex;
          gap: 0.5rem;
          align-items: center;
          cursor: pointer;

          i {
            color: $astra;
            font-size: 1.1rem;
          }
        }
      }
    }
  }
}
